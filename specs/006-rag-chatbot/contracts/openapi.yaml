openapi: 3.0.0
info:
  title: RAG Chatbot API
  version: 1.0.0
  description: API for the Physical AI Textbook RAG Chatbot, providing conversational AI capabilities based on book content.
servers:
  - url: /api/v1
    description: Production server
paths:
  /chat:
    post:
      summary: Ask a general question to the chatbot
      operationId: askChatQuestion
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - question
                - session_id
              properties:
                question:
                  type: string
                  description: The user's question to the chatbot.
                  example: "What is the main topic of Chapter 1?"
                session_id:
                  type: string
                  description: A unique identifier for the user's chat session.
                  example: "user-123-abc"
      responses:
        '200':
          description: A successful streamed response from the chatbot.
          content:
            application/json:
              schema:
                type: object
                properties:
                  answer_chunk:
                    type: string
                    description: A chunk of the streamed answer.
                example:
                  answer_chunk: "The main topic of Chapter 1 is the introduction to Physical AI."
        '400':
          description: Invalid request payload.
        '500':
          description: Internal server error or chatbot service unavailable.
  /chat/selected:
    post:
      summary: Ask a question about user-selected text
      operationId: askChatQuestionSelectedText
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - question
                - selected_text
                - session_id
              properties:
                question:
                  type: string
                  description: The user's question about the selected text.
                  example: "What does this paragraph mean for robotics?"
                selected_text:
                  type: string
                  description: The text selected by the user from the textbook content.
                  example: "Embodied intelligence refers to..."
                session_id:
                  type: string
                  description: A unique identifier for the user's chat session.
                  example: "user-123-abc"
      responses:
        '200':
          description: A successful streamed response from the chatbot.
          content:
            application/json:
              schema:
                type: object
                properties:
                  answer_chunk:
                    type: string
                    description: A chunk of the streamed answer.
                example:
                  answer_chunk: "This paragraph explains the concept of embodied intelligence..."
        '400':
          description: Invalid request payload.
        '500':
          description: Internal server error or chatbot service unavailable.
